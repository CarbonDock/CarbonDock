<!DOCTYPE html>
<html>
    <head>
        <title>CarbonDock</title>
        
        <!-- Include eel.js - note this file doesn't exist in the 'web' directory -->
        <script type="text/javascript" src="eel.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script type="text/javascript">

        function httpGet(url){
            var xmlHttp = new XMLHttpRequest();
            xmlHttp.open("GET", url, false);
            xmlHttp.send(null);
            return xmlHttp.responseText;
        }

        function Refresh() {
            var targets = eel.ips();
            var litems = new Array();
            for (var i=0; i<targets.length; i++){
                var name = targets[i][0]
                var ip = targets[i][1]
                var danger = parseFloat(JSON.parse(httpGet('http://'+ip+':8000')).danger);
                if (danger < 0.1) {
                    var dangerMode = 'Safe';  
                } else if (danger < 0.25) {
                    var dangerMode = 'Somewhat risky';  
                } else if (danger < 0.4) {
                    var dangerMode = 'Risky';  
                } else if (danger < 0.7) {
                    var dangerMode = 'Dangerous';  
                } else {
                    var dangerMode = 'Leave the area.';
                }
                
                var outstr = '<ul class="active-module"><h1 class="active-module-name">'+name+'</h1><p class="active-module-status">Status: '+dangerMode+'</p></ul>';
                litems.push(outstr);
            }
            $('#modules').html(litems.join("\n"));
        }
        
        </script>

        <style>
            .active-module {

            }
            .active-module-name {

            }
            .active-module-status {

            }
            #refresh {

            }
            #modules {

            }
            #actions {
                
            }
        </style>
    </head>
    
    <body>
        <div id='actions'>
            <button id='refresh' onclick="">Refresh</button>
        </div>
        <li id="modules">
        </li>
    </body>
</html>
